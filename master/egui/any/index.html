<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Any-type storages for `Memory`."><meta name="keywords" content="rust, rustlang, rust-lang, any"><title>egui::any - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><script defer src="../../main.js"></script>
    <noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a class="sidebar-logo" href="../../egui/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></div>
        </a><h2 class="location">Module any</h2><div class="sidebar-elems"><div class="block items"><ul><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li></ul></div><div id="sidebar-vars" data-name="any" data-ty="mod" data-relpath="./"></div><script defer src="./sidebar-items.js"></script></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../egui/index.html"><img class="rust-logo" src="../../rust-logo.png" alt="logo"></a><nav class="sub"><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav></div><section id="main-content" class="content"><h1 class="fqn"><span class="in-band">Module <a href="../index.html">egui</a>::<wbr><a class="mod" href="#">any</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/egui/any/mod.rs.html#1-61" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Any-type storages for <a href="../struct.Memory.html"><code>Memory</code></a>.</p>
<p>This module contains structs to store arbitrary types using <a href="https://doc.rust-lang.org/nightly/core/any/trait.Any.html"><code>Any</code></a> trait. Also, they can be cloned, and structs in [<code>serializable</code>] can be de/serialized.</p>
<p>All this is just <code>HashMap&lt;TypeId, Box&lt;dyn Any + static&gt;&gt;</code> and <code>HashMap&lt;Key, Box&lt;dyn Any + static&gt;&gt;</code>, but with helper functions and hacks for cloning and de/serialization.</p>
<h2 id="trait-requirements" class="section-header"><a href="#trait-requirements">Trait requirements</a></h2>
<p>If you want to store your type here, it must implement <code>Clone</code> and <code>Any</code> and be <code>'static</code>, which means it must not contain references. If you want to store your data in serializable storage, it must implement <code>serde::Serialize</code> and <code>serde::Deserialize</code> under the <code>persistent</code> feature.</p>
<h2 id="typemap" class="section-header"><a href="#typemap"><code>TypeMap</code></a></h2>
<p>It stores everything by just type. You should use this map for your widget when all instances of your widgets can have only one state. E.g. for popup windows, for color picker.</p>
<p>To not have intersections, you should create newtype for anything you try to store here, like:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">struct</span> <span class="ident">MyEditBool</span>(<span class="kw">pub</span> <span class="ident">bool</span>);</code></pre></div>
<h2 id="anymapkey" class="section-header"><a href="#anymapkey"><code>AnyMap&lt;Key&gt;</code></a></h2>
<p>In <a href="../struct.Memory.html"><code>Memory</code></a> <code>Key</code> = <a href="../struct.Id.html"><code>Id</code></a>.</p>
<p><a href="struct.TypeMap.html" title="TypeMap"><code>TypeMap</code></a> and <a href="struct.AnyMap.html"><code>AnyMap&lt;Key&gt;</code></a> has a quite similar interface, except for <a href="struct.AnyMap.html" title="AnyMap"><code>AnyMap</code></a> you should pass <code>Key</code> to get and insert things.</p>
<p>It stores everything by <code>Key</code>, this should be used when your widget can have different data for different instances of the widget.</p>
<h2 id="serializable" class="section-header"><a href="#serializable"><code>serializable</code></a></h2>
<p><a href="struct.TypeMap.html" title="TypeMap"><code>TypeMap</code></a> and [<code>serializable::TypeMap</code>] has exactly the same interface, but [<code>serializable::TypeMap</code>] only requires serde traits for stored object under <code>persistent</code> feature. Same thing for <a href="struct.AnyMap.html" title="AnyMap"><code>AnyMap</code></a> and [<code>serializable::AnyMap</code>].</p>
<h2 id="what-could-break" class="section-header"><a href="#what-could-break">What could break</a></h2>
<p>Things here could break only when you trying to load this from file.</p>
<p>First, serialized <code>TypeId</code> in [<code>serializable::TypeMap</code>] could broke if you updated the version of the Rust compiler between runs.</p>
<p>Second, count and reset all instances of a type in [<code>serializable::AnyMap</code>] could return an incorrect value for the same reason.</p>
<p>Deserialization errors of loaded elements of these storages can be determined only when you call <code>get_...</code> functions, they not logged and not provided to a user, on this errors value is just replaced with <code>or_insert()</code>/default value.</p>
<h2 id="when-not-to-use-this" class="section-header"><a href="#when-not-to-use-this">When not to use this</a></h2>
<p>This is not for important widget data. Some errors are just ignored and the correct value of type is inserted when you call. This is done to more simple interface.</p>
<p>You shouldn’t use any map here when you need very reliable state storage with rich error-handling. For this purpose you should create your own <code>Memory</code> struct and pass it everywhere you need it. Then, you should de/serialize it by yourself, handling all serialization or other errors as you wish.</p>
</div></details><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.AnyMap.html" title="egui::any::AnyMap struct">AnyMap</a></div><div class="item-right docblock-short"><p>Stores any object by <code>Key</code>.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.TypeMap.html" title="egui::any::TypeMap struct">TypeMap</a></div><div class="item-right docblock-short"><p>Maps types to a single instance of that type.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.AnyMapTrait.html" title="egui::any::AnyMapTrait trait">AnyMapTrait</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="egui" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.59.0-nightly (cfa3fe5af 2021-12-31)" ></div>
</body></html>