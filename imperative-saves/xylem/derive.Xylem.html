<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Derives a [`Xylem`] implementation for a struct or enum and the corresponding [`Xylem::From`] type."><meta name="keywords" content="rust, rustlang, rust-lang, Xylem"><title>Xylem in xylem - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc derive"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../xylem/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="index.html">xylem</a></h2><div id="sidebar-vars" data-name="Xylem" data-ty="derive" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Derive Macro <a href="index.html">xylem</a>::<wbr><a class="derive" href="#">Xylem</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/xylem_codegen/lib.rs.html#10" title="goto source code">[src]</a></span></h1><div class="docblock item-decl"><pre class="rust derive"><code>#[derive(Xylem)]
{
    // Attributes available to this derive:
    #[xylem]
}
</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Derives a <a href="trait.Xylem.html" title="Xylem"><code>Xylem</code></a> implementation for a struct or enum
and the corresponding <a href="trait.Xylem.html#associatedtype.From" title="Xylem::From"><code>Xylem::From</code></a> type.</p>
<p>In this page, “input” refers to the struct/enum written by the user manually,
and “derived” refers to the struct/enum generated by the macro
to be used as the <a href="trait.Xylem.html#associatedtype.From" title="Xylem::From"><code>Xylem::From</code></a> type.</p>
<p>The derived type has the same structure as the input type
with each field type <code>Type</code> replaced by <code>&lt;Type as Xylem&lt;S&gt;&gt;::From</code>,
except otherwise specified by the field attributes.
Conversion takes place by mapping each field of the derived type
to the corresponding field of the input type
by calling <a href="trait.Xylem.html#method.convert" title="Xylem::convert"><code>Xylem::convert</code></a>.</p>
<h2 id="container-attributes" class="section-header"><a href="#container-attributes">Container Attributes</a></h2>
<p>The following attributes can be applied on the input.</p>
<h3 id="xylemexpose--ident" class="section-header"><a href="#xylemexpose--ident"><code>#[xylem(expose = Ident)]</code></a></h3>
<p>Expose the derived type with the specified name <code>Ident</code>.
The type has the same visibility as the input type.</p>
<h3 id="xylemschema--pathtoschema" class="section-header"><a href="#xylemschema--pathtoschema"><code>#[xylem(schema = path::to::Schema)]</code></a></h3>
<p>Specify the schema type to define for as <code>path::to::Schema</code>.</p>
<h3 id="xylemserdexxx" class="section-header"><a href="#xylemserdexxx"><code>#[xylem(serde(xxx))]</code></a></h3>
<p>Apply the serde attribute <code>xxx</code> to the derived type.</p>
<h3 id="xylemderivefoo-bar" class="section-header"><a href="#xylemderivefoo-bar"><code>#[xylem(derive(Foo, Bar))]</code></a></h3>
<p>Apply the derive macros <code>Foo</code>, <code>Bar</code> on the derived type.</p>
<h3 id="xylemprocess" class="section-header"><a href="#xylemprocess"><code>#[xylem(process)]</code></a></h3>
<p>Call <a href="trait.Processable.html#method.preprocess" title="Processable::preprocess"><code>Processable::preprocess</code></a> before conversion,
call <a href="trait.Processable.html#method.postprocess" title="Processable::postprocess"><code>Processable::postprocess</code></a> after conversion.</p>
<p>Requires the input type to implement the <a href="trait.Processable.html" title="Processable"><code>Processable</code></a> trait.</p>
<h2 id="field-attributes" class="section-header"><a href="#field-attributes">Field Attributes</a></h2>
<p>The following attributes can be applied on the fields in the input.
As above, “input field” refers to the field written by the user manually,
and “derived field” refers to the field generated by the macro
that occur in the derived type.
Furthermore, the following assumes that
the attribute is applied on <code>foo: Bar</code> unless otherwise specified.</p>
<h3 id="xylemserdexxx-1" class="section-header"><a href="#xylemserdexxx-1"><code>#[xylem(serde(xxx))]</code></a></h3>
<p>Apply the serde attribute <code>xxx</code> to the derived field.</p>
<h3 id="xylempreserve" class="section-header"><a href="#xylempreserve"><code>#[xylem(preserve)]</code>:</a></h3>
<p>The derived field will use the same type as the input field,
i.e. <code>#[xylem(preserve)] foo: Bar</code> generats <code>foo: Bar</code> in the derived type.
The value in the derived field is directly moved to the target field.</p>
<h3 id="xylemtransform--pathtype" class="section-header"><a href="#xylemtransform--pathtype"><code>#[xylem(transform = path(Type))]</code></a></h3>
<p>Generate a field <code>foo: Type</code> in the derived type,
and call <code>path(derived.foo)</code> during conversion.
<code>path</code> is the path to a function with the signature
<code>fn(Type) -&gt; Result&lt;Bar, S::Error&gt;</code>.
For example, <code>#[xylem(transform = Ok(Type))]</code>
is equivalent to <code>#[xylem(preserve)]</code>.</p>
<h3 id="xylemtransform_with_context--pathtype" class="section-header"><a href="#xylemtransform_with_context--pathtype"><code>#[xylem(transform_with_context = path(Type))]</code></a></h3>
<p>Similar to <code>transform</code>, except <code>path</code> accepts an extra context parameter,
giving the signature <code>fn(Type, &amp;mut S::Context) -&gt; Result&lt;Field, S::Error&gt;</code>.</p>
<h3 id="xylemdefault--expr" class="section-header"><a href="#xylemdefault--expr"><code>#[xylem(default = expr)]</code></a></h3>
<p>Always uses <code>expr</code> (resolved every time the struct
or the enum variant is constructed) as the value.
Does not generate a field in the <code>From</code> type.
The expression should have type <code>Result&lt;Field, S::Error&gt;</code>,
where <code>Field</code> is the field type.</p>
<p>Comparing <code>default</code>, <code>preserve</code>, <code>transform</code> and <code>transform_with_context</code>:</p>
<ul>
<li>If a corresponding field is required in the derived type,
<ul>
<li>If they have different types,
<ul>
<li>If context is required, use <code>transform_with_context</code>.</li>
<li>Otherwise, use <code>transform</code>.</li>
</ul>
</li>
<li>Otherwise, use <code>preserve</code>.</li>
</ul>
</li>
<li>Otherwise, use <code>default</code>.</li>
</ul>
<h3 id="xylemargskey1--value1-key2--value2" class="section-header"><a href="#xylemargskey1--value1-key2--value2"><code>#[xylem(args(key1 = value1, key2 = value2))]</code></a></h3>
<p>Pass the given arguments in the <a href="trait.Xylem.html#method.convert" title="Xylem::convert"><code>Xylem::convert</code></a> call.
Incompatible with <code>default</code>, <code>preserve</code>, <code>transform</code> and <code>transform_with_context</code>.
<code>key1</code> and <code>key2</code> are visible named fields in <code>&lt;Bar as Xylem&lt;S&gt;&gt;::Args</code>.
The values in the key are evaluated lazily and stored as a <code>static</code>.
The generated code is equivalent to the following:</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="macro">lazy_static!</span> {
    <span class="kw">static</span> <span class="kw-2">ref</span> <span class="ident">ARGS</span>: <span class="ident">Args</span> <span class="op">=</span> <span class="ident">Args</span> {
        <span class="ident">key1</span>: <span class="ident">value1</span>,
        <span class="ident">key2</span>: <span class="ident">value2</span>,
    };
}
<span class="op">&lt;</span><span class="ident">Bar</span> <span class="kw">as</span> <span class="ident">Xylem</span><span class="op">&lt;</span><span class="ident">S</span><span class="op">&gt;</span><span class="op">&gt;</span><span class="ident">::convert</span>(<span class="ident">derived</span>.<span class="ident">foo</span>, <span class="ident">context</span>, <span class="kw-2">&amp;</span><span class="kw-2">*</span><span class="ident">ARGS</span>)</code></pre></div>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="xylem" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>